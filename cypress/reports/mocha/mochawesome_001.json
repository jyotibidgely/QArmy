{
  "stats": {
    "suites": 1,
    "tests": 11,
    "passes": 11,
    "pending": 0,
    "failures": 0,
    "start": "2022-08-12T11:26:35.362Z",
    "end": "2022-08-12T11:27:52.132Z",
    "duration": 76770,
    "testsRegistered": 11,
    "passPercent": 100,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "45cb5173-502d-486e-b3bb-5ab33fdf9d37",
      "title": "",
      "fullFile": "cypress/e2e/Ameren/GbDownload/GbDownloadAMRE.cy.js",
      "file": "cypress/e2e/Ameren/GbDownload/GbDownloadAMRE.cy.js",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "7576c96a-9a3c-4561-8743-ecc0b93a6f9e",
          "title": "GB download - AMR Electric",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "Invoice data API response",
              "fullTitle": "GB download - AMR Electric Invoice data API response",
              "timedOut": null,
              "duration": 6910,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.visit(pilotData.url + \"dashboard?user-hash=\" + userHash);\ncy.log(bearerToken);\nobjApiResponse.invoiceDataResponse(uuid, strMeasurementType, bearerToken).then(res => {\n  cy.log(res);\n  objLength = Object.keys(res).length;\n  cy.log(objLength);\n  var firstKey = Object.keys(res)[objLength - 1];\n  let objData = res[firstKey];\n  cy.log(objData);\n  var objFirst = Object.keys(res)[0];\n  var firstObjData = res[objFirst];\n  var firstBillingStartTs = firstObjData['billingStartTs'];\n  var firstStartTs = new Date(firstBillingStartTs * 1000);\n  strMinDate = objGenericPage.changDateFormat(firstStartTs.toDateString());\n  billingEndTs = objData['billingEndTs'];\n  billingStartTs = objData['billingStartTs'];\n  cy.log(billingStartTs);\n  cy.log(billingEndTs);\n  var startTs = new Date(billingStartTs * 1000);\n  var endTs = new Date(billingEndTs * 1000);\n  endTs.setDate(endTs.getDate() - 1);\n  cy.log(startTs.toLocaleString());\n  cy.log(endTs.toDateString());\n  strStartDate = objGenericPage.changDateFormat(startTs.toDateString());\n  strEndDate = objGenericPage.changDateFormat(endTs.toDateString());\n  cy.log('Start date - ' + strStartDate);\n  cy.wrap(strStartDate).as('strStartDate');\n  var newStartTs = new Date(billingEndTs * 1000);\n  newStartTs.setDate(newStartTs.getDate() - 10);\n  strNewStartDate = objGenericPage.changDateFormat(newStartTs.toDateString());\n  newEpochStartTs = newStartTs.getTime() / 1000;\n  var newEndTs = new Date(billingEndTs * 1000);\n  newEndTs.setDate(newEndTs.getDate() - 1);\n  strNewEndDate = objGenericPage.changDateFormat(newEndTs.toDateString());\n  newEpochEndTs = newEndTs.getTime() / 1000;\n});",
              "err": {},
              "uuid": "8cbde72c-333c-46eb-9a3f-25bcbac81966",
              "parentUUID": "7576c96a-9a3c-4561-8743-ecc0b93a6f9e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Navigate to Download my data",
              "fullTitle": "GB download - AMR Electric Navigate to Download my data",
              "timedOut": null,
              "duration": 7772,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "objGenericPage.checkHeader();\ncy.wait(1000);\nobjGenericPage.clickDownloadMyData();\ncy.wait(1000);",
              "err": {},
              "uuid": "4d0518ca-7902-4be4-8f27-69b55ec38e86",
              "parentUUID": "7576c96a-9a3c-4561-8743-ecc0b93a6f9e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Export data - Bill period",
              "fullTitle": "GB download - AMR Electric Export data - Bill period",
              "timedOut": null,
              "duration": 7632,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "var billPeriodStartDate = objGenericPage.changDateFormatString(strStartDate);\nvar billPeriodEndDate = objGenericPage.changDateFormatString(strEndDate);\nvar strBillPeriodDate = billPeriodStartDate + ' - ' + billPeriodEndDate;\ncy.log(strBillPeriodDate);\nobjGbDownload.verifyPageTitle();\nobjGbDownload.verifySubtitle();\nobjGbDownload.verifyExportBillLabel();\nobjGbDownload.verifyExportDaysLabel();\nobjGbDownload.verifyDataMsg();\nobjGbDownload.selectDropdownElement(strBillPeriodDate, objLength);\ncy.get(objGbDownload.exportBtn).should('have.css', 'background-color').and('eq', 'rgb(27, 108, 181)');\ncy.get(objGbDownload.exportBtn).should('have.css', 'cursor').and('eq', 'pointer');\ncy.get('.download-page-btn').contains('Cancel').should('have.css', 'background-color').and('eq', 'rgba(0, 0, 0, 0)');\ncy.get('.download-page-btn').contains('Cancel').should('have.css', 'cursor').and('eq', 'pointer');\nobjGbDownload.clickExport();\nobjGbDownload.checkSuccessMsg('GreenButton data downloaded successfully.');",
              "err": {},
              "uuid": "bb70d63b-50b1-423e-9481-d0d23d1de389",
              "parentUUID": "7576c96a-9a3c-4561-8743-ecc0b93a6f9e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Export data - Calendar Days",
              "fullTitle": "GB download - AMR Electric Export data - Calendar Days",
              "timedOut": null,
              "duration": 11302,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.contains('Export usage for range of days').click();\ncy.wait(200);\ncy.get(objGbDownload.calendarIcon).eq(0).should('be.visible');\ncy.get(objGbDownload.calendarIcon).eq(1).should('be.visible');\ncy.get(objGbDownload.calendarIcon).eq(0).click();\ncy.get('[aria-label=\"Go to the previous month\"]').click();\ncy.get('[role=\"presentation\"]').eq(10).click();\ncy.get(objGbDownload.calendarIcon).eq(1).click();\ncy.get('[aria-label=\"Go to the previous month\"]').click();\ncy.get('[role=\"presentation\"]').eq(11).click();\nobjGbDownload.clickExport();\nobjGbDownload.checkSuccessMsg('GreenButton data downloaded successfully.');\ncy.wait(500); //Min and max dates\nobjGbDownload.enterFromDate(strMinDate);\nobjGbDownload.enterToDate(strEndDate);\nobjGbDownload.clickExport();\nobjGbDownload.checkSuccessMsg('Please select a date range that does not exceed one year.'); //Same date\nobjGbDownload.enterFromDate(strStartDate);\nobjGbDownload.enterToDate(strStartDate);\nobjGbDownload.clickExport();\nobjGbDownload.checkSuccessMsg('GreenButton data downloaded successfully.');",
              "err": {},
              "uuid": "a6d329e0-551b-45fc-b6e2-2d32fd93aec3",
              "parentUUID": "7576c96a-9a3c-4561-8743-ecc0b93a6f9e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Export data - Days",
              "fullTitle": "GB download - AMR Electric Export data - Days",
              "timedOut": null,
              "duration": 10259,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.deleteDownloadsFolder();\ncy.contains('Export usage for range of days').click();\nobjGbDownload.enterFromDate('16/09/20');\nobjGbDownload.checkErrorMsg('Invalid Date Format');\nobjGbDownload.enterFromDate('03/02/2000');\nobjGbDownload.checkErrorMsg('Date should not be before minimal date');\nobjGbDownload.enterFromDate(strStartDate);\nobjGbDownload.enterToDate('56/09/2022');\nobjGbDownload.checkErrorMsg('Invalid Date Format');\nobjGbDownload.enterToDate('08/05/2050');\nobjGbDownload.checkErrorMsg('Date should not be after maximal date');\nobjGbDownload.enterToDate(strEndDate);\nobjGbDownload.clickExport();\nobjGbDownload.checkSuccessMsg('GreenButton data downloaded successfully.');",
              "err": {},
              "uuid": "3d6895e0-85f4-4aac-8bde-d2bec159b629",
              "parentUUID": "7576c96a-9a3c-4561-8743-ecc0b93a6f9e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Check Disabled fields",
              "fullTitle": "GB download - AMR Electric Check Disabled fields",
              "timedOut": null,
              "duration": 2751,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.contains('Export usage for range of bill period').click();\ncy.wait(500);\ncy.get(objGbDownload.fromDate).should('be.disabled');\ncy.get(objGbDownload.toDate).should('be.disabled');\ncy.get(objGbDownload.calendarIcon).parent().parent().should('be.disabled');\ncy.contains('Export usage for range of days').click();\ncy.wait(500);\ncy.get(objGbDownload.dropdownEle).should('have.attr', 'aria-disabled', 'true');",
              "err": {},
              "uuid": "c3bcbf80-8753-4e4e-a750-82d5aeb0fcdb",
              "parentUUID": "7576c96a-9a3c-4561-8743-ecc0b93a6f9e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Cancel button",
              "fullTitle": "GB download - AMR Electric Cancel button",
              "timedOut": null,
              "duration": 1286,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "objGbDownload.clickCancelBtn();\ncy.wait(500);\ncy.get('.home-page-main', {\n  timeout: 10000\n}).should('be.visible');",
              "err": {},
              "uuid": "3d7139c7-8aa0-47f4-8fbd-ba0520925732",
              "parentUUID": "7576c96a-9a3c-4561-8743-ecc0b93a6f9e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Fetch values from RAW data",
              "fullTitle": "GB download - AMR Electric Fetch values from RAW data",
              "timedOut": null,
              "duration": 771,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "objApiResponse.gbJsonResponse(uuid, gatewayId, billingStartTs, newEpochEndTs, bearerToken).then(res => {\n  cy.log(res);\n  var firstKey = Object.keys(res)[0];\n  let objData = res[firstKey];\n  cy.log(objData); // let billingEndTs = objData['billingEndTs']\n  for (let index = 0; index < res.length - 1; index++) {\n    const element = res[index];\n    console.log(element);\n    const time = element['time'];\n    var value = element['value'];\n    const duration = element['duration'];\n    value = Math.round(value);\n    cy.log(value);\n    strObj = '<espi:IntervalReading><espi:ReadingQuality><espi:quality>17</espi:quality></espi:ReadingQuality><espi:timePeriod><espi:duration>' + duration + '</espi:duration><espi:start>' + time + '</espi:start></espi:timePeriod><espi:value>' + value + '</espi:value></espi:IntervalReading>';\n    arrValues.push(strObj); // console.log(strObj)\n  }\n});",
              "err": {},
              "uuid": "e84d4798-202c-4c24-8605-384c048d4d57",
              "parentUUID": "7576c96a-9a3c-4561-8743-ecc0b93a6f9e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Fetch values from Meter API",
              "fullTitle": "GB download - AMR Electric Fetch values from Meter API",
              "timedOut": null,
              "duration": 437,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "objApiResponse.meterApiResponse(uuid, gatewayId, bearerToken).then(res => {\n  cy.log(res);\n  var strMeterObj = '/users/' + uuid + '/homes/1/gws/' + gatewayId + '/meters/1';\n  var meterObj = res[strMeterObj];\n  meterToken = meterObj.token;\n  cy.log(meterToken);\n});",
              "err": {},
              "uuid": "a7c0f22d-99ef-4967-8b3b-5c5f00527186",
              "parentUUID": "7576c96a-9a3c-4561-8743-ecc0b93a6f9e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Read download file",
              "fullTitle": "GB download - AMR Electric Read download file",
              "timedOut": null,
              "duration": 788,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.task('downloads', 'cypress/downloads').then(after => {\n  console.log(after);\n  console.log(strObj);\n  cy.readFile(\"cypress/downloads/\" + after).then(fileToRead => {\n    cy.wrap(fileToRead).should('contain', 'Green Button Data File. Meter: ' + meterToken);\n    cy.wrap(fileToRead).should('contain', '<espi:ReadingType><espi:accumulationBehaviour>4</espi:accumulationBehaviour><espi:commodity>1</espi:commodity><espi:dataQualifier>12</espi:dataQualifier><espi:defaultQuality>17</espi:defaultQuality><espi:flowDirection>1</espi:flowDirection><espi:intervalLength>86400</espi:intervalLength><espi:kind>12</espi:kind><espi:phase>769</espi:phase><espi:powerOfTenMultiplier>0</espi:powerOfTenMultiplier><espi:timeAttribute>0</espi:timeAttribute><espi:uom>72</espi:uom></espi:ReadingType>');\n    for (let index = 0; index < arrValues.length; index++) {\n      const element = arrValues[index];\n      console.log(element);\n      cy.wrap(fileToRead).should('contain', element);\n    }\n  });\n});",
              "err": {},
              "uuid": "488826bd-0edf-4791-ada4-139bd784aa8c",
              "parentUUID": "7576c96a-9a3c-4561-8743-ecc0b93a6f9e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Upload data - DMD Validator",
              "fullTitle": "GB download - AMR Electric Upload data - DMD Validator",
              "timedOut": null,
              "duration": 6236,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.visit(\"https://dmdvalidator.greenbuttonalliance.org/\");\ncy.get('#FBSelection', {\n  timeout: 10000\n}).should('be.visible');\ncy.get('select').select('Energy Usage file: Electricity Interval Metering');\ncy.wait(200);\ncy.get('#FB_15').uncheck({\n  force: true\n});\ncy.wait(500);\ncy.task('downloads', 'cypress/downloads').then(p => {\n  //file to be uploaded path in project folder\n  const fileToUpload = \"../downloads/\" + p;\n  cy.log(fileToUpload); //upload file with attachFile\n  cy.get('#dropZone').attachFile(fileToUpload, {\n    subjectType: 'drag-n-drop'\n  });\n  cy.get('thead > tr > td', {\n    timeout: 15000\n  }).should('have.text', ' ...all tests were successful. ...all tests were successful. ...all tests were successful.');\n  cy.get('.text-danger').should('not.exist');\n});",
              "err": {},
              "uuid": "612ac063-2638-4c1f-a9e3-4982a5222bef",
              "parentUUID": "7576c96a-9a3c-4561-8743-ecc0b93a6f9e",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "8cbde72c-333c-46eb-9a3f-25bcbac81966",
            "4d0518ca-7902-4be4-8f27-69b55ec38e86",
            "bb70d63b-50b1-423e-9481-d0d23d1de389",
            "a6d329e0-551b-45fc-b6e2-2d32fd93aec3",
            "3d6895e0-85f4-4aac-8bde-d2bec159b629",
            "c3bcbf80-8753-4e4e-a750-82d5aeb0fcdb",
            "3d7139c7-8aa0-47f4-8fbd-ba0520925732",
            "e84d4798-202c-4c24-8605-384c048d4d57",
            "a7c0f22d-99ef-4967-8b3b-5c5f00527186",
            "488826bd-0edf-4791-ada4-139bd784aa8c",
            "612ac063-2638-4c1f-a9e3-4982a5222bef"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 56144,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 2000
    }
  ],
  "meta": {
    "mocha": {
      "version": "7.0.1"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "mochawesome",
        "saveHtml": false,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.3"
    },
    "marge": {
      "options": {
        "id": "default",
        "reportDir": "cypress/reports/mocha",
        "quite": true,
        "overwrite": false,
        "html": false,
        "json": true
      },
      "version": "6.2.0"
    }
  }
}